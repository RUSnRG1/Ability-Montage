# ゲームの構造検討
- 春怨の途中に登場するゲームをリアルで実装する
- 作品内での記載
  - かつては「暇つぶしゲー」と呼ばれた部類のゲームで、何もしたくないが何かをしたことにして時間を浪費したい人にはうってつけだった
  - 科学世紀には高度なゲームはほとんどサーバーが必要になっていたため、結果として現在遊べるのはこういった単純なものしかない
  - その中では適度な難易度とグラフィックの感じで何となくずっとやってしまう。
  - 癖は強いがなれると結構いける
  - ソースをいじってグラフィックを書き換えてみたので、蓮子がメリーを救いに行くようになっていてとても面白い
  - 3面まではクリアできるが、4面だけがどうしてもクリアできない
- 基本的にはフラッピーバードの重力なしバージョン
  - 帽子が飛ぶ
  - クリックすると上下方向が変化する。上へ下へとうまく帽子を操作する
  - 障害物に当たらないように移動し、特定の距離を稼ぐとコースクリア
  - 全4面。ただし実際には4面はクリア条件が無限であり、絶対にクリアできない
- ソースコード内にメリーのセリフを入れる。そのためめちゃくちゃ綺麗なコードを書くことを心がけること！


# 設計
## ローディング画面
- 設計はAbilityMonatgeと同じでいいと思う
- 画像や音源の読み込みはちゃんとここでやって、動作軽くすること
## タイトル画面
- ゲームスタートとオプション
  - ゲームスタート
  - オプション
    - いる？
    - 別に音量オンオフくらいでよくない？
## ゲーム画面
GameScenが司り、様々な処理を行う。  
- GameScene
  - loop...calcとdrawを回す。その際状態を制御
  - calc(s)...計算を行う.引数sは状態。これに合わせて遷移
  - draw(s)... 描画を行う。
以下はGameScene内の各クラス
- Player  
  - 自機
  - ステージ開始時
    - 自動でアニメーションを流す
    - movieと併せて、時間経過で処理。
  - 操作受付時
    - x固定。y,vy,ayを変動させて上下させる
    - 画面クリックでayを正負を逆転させる。つまり方向転換はするが、慣性がある
    - 裏で接触判定と進行距離を計算する。
      - 接触判定は矩形2つの組み合わせが楽なんじゃないかと思う。つまりPlayer.calc(Obstacle)みたいになる？
      - 進行距離まあ普通に考える。別に外部には見えないし。
      - これらを用いて、playerのcalcはreturn処理を入れて、それによってGameSceneで挙動を変動させる
  - ステージクリア時
    - 自動アニメーションの後、次ステージへ
  - ミス時
    - 自動アニメーションの後、GameOverSceneへ遷移

- Obstacle
  - 障害物の処理。以下の障害物がある
  - ビル群
    - 画面下部にあるビル。基本的には常に下にある。
    - 上部の高さを指定して適当に画像を置けばいいと思います。横の長さは一定でいい気が。
    - 横50Px, 画面全体で930pxなので、20個用意すればいい？
      - `もしかして横の長さ変えたほうが面白い？`
    - 横に移動していき、画面外に出た段階で一番後ろへ戻る、その際に高さをランダムで変更
    - クリアフラグが経ったらその後は全部同じ高さにして、自動アニメーションへ移行
  - 飛行機
    - 一定スピードで上空を突っ切っていく
    - 高さは本当に高いところだけでいいと思う
    - 画像を複数用意しておいて、ランダムで好きなものを表示させる
  - 流れ星
    - 二面以降
    - 上空から斜めに落ちていく
    - 上からくるので下に避けようとするが、実はプレイヤーのいるところでは下のほうにあるので、上に咲けるのが正解、っていう感じの敵
    - x,yの速度にランダム性は持たせつつも、『この範囲内に収まるように』というのを制御するやり方を考える
  - 打ち上げ花火
    - 三面以降
    - ビルから発射されて上空で爆発する。つまり下に避ける必要がある
    - ある程度前の段階で打ち上げ段階アニメが表示された後、1回見えなくなってから爆発、という形をとるので、プレイヤーは前方を見ておく必要がある
    - 具体的な挙動
     1. buildingのあるnumのビルにフラッグ判定を持たせる
     2. このビルがリセットされるときにフラグ判定処理を行わせる
     3. フラグがtrueになったら、打ち上げ準備開始。打ち上げ高さ、を乱数でセット
     4. 500pxまでに打ち上げ速度が0になるような値を計算してセッティング
     5. あとは打ち上げるだけ
  - UFO
    - 四面のみ
    - 飛行機と似ているが、動きが変則的
    - 現れてから一定時間停滞し、一気に突っ込んでくる。
    - 色は三色。もちろん。


- background
  - 背景画像
  - 多少速度変えればそれっぽくなると思う

- movie
  - ステージスタート時の大き目の土台ビル
  - ステージクリア時のビル＆メリー＆風
  - 全て経過時間操作カウント操作でいいと思うよ

## GameOver画面




# クラス